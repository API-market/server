{
	"info": {
		"_postman_id": "ee151fc1-803d-4800-b20f-b82658d8ea92",
		"name": "simple_test",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Create first user",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "bc5531f9-49b3-4c08-8561-fedcd71db922",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is OK (200)\"] = responseCode.code === 200",
							"",
							"pm.test(\"user id \", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.user_id).to.equal(2)",
							"});",
							"",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "6d397378-0dca-4696-b2a7-50d10e206e43",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"username\" : \"superman\",\r\n  \"eos\" : \"123321\",\r\n  \"firstName\" : \"Robert\",\r\n  \"lastName\" : \"De Niro\",\r\n  \"email\" : \"tester7@lumeos.io\",\r\n  \"phone\" : \"1234\",\r\n  \"dob\" : \"19850423\",\r\n  \"gender\" : \"male\",\r\n  \"address\" : {\r\n      \"city\" : \"Brooklyn\",\r\n    \"region\" : \"NY\",\r\n    \"postalCode\" : \"11235\",\r\n    \"street\" : \"123 Lol What Street Apt. 2B\"\r\n  },\r\n  \"school\" : \"Lol What State University\",\r\n  \"employer\" : \"Uncle Sam\",\r\n  \"password\" : \"testing\"\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/users",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"users"
					]
				},
				"description": "Creates the first user and checks user id is 1"
			},
			"response": []
		},
		{
			"name": "Validate first user",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "c5e8059e-abd2-4b82-b457-5749fa9a568d",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is ok\"] = responseCode.code === 200",
							"",
							"tests[\"Email field is present\"] = responseBody.has(\"email\");",
							"tests[\"firstName field is present\"] = responseBody.has(\"firstName\");",
							"tests[\"lastName field is present\"] = responseBody.has(\"lastName\");",
							"tests[\"DOB field is present\"] = responseBody.has(\"dob\");",
							"tests[\"Gender field is present\"] = responseBody.has(\"gender\");",
							"tests[\"School field is present\"] = responseBody.has(\"school\");",
							"tests[\"Employer field is present\"] = responseBody.has(\"employer\");",
							"tests[\"Username field is present\"] = responseBody.has(\"username\");",
							"tests[\"Eos field is present\"] = responseBody.has(\"eos\");",
							"",
							"pm.test(\"check fields not null\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.email).to.not.equal(\"\");",
							"    pm.expect(jsonData.firstName).to.not.eql(\"\");",
							"    pm.expect(jsonData.lastName).to.not.eql(\"\");",
							"    pm.expect(jsonData.phone).to.not.eql(\"\");",
							"    pm.expect(jsonData.dob).to.not.eql(\"\");",
							"    pm.expect(jsonData.gender).to.not.eql(\"\");",
							"    pm.expect(jsonData.school).to.not.eql(\"\");",
							"    pm.expect(jsonData.employer).to.not.eql(\"\");",
							"    pm.expect(jsonData.balance).to.not.eql(\"\");",
							"});",
							"",
							"pm.test(\"Test field values.\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.email).to.equal(\"tester7@lumeos.io\");",
							"    pm.expect(jsonData.firstName).to.eql(\"Robert\");",
							"    pm.expect(jsonData.lastName).to.eql(\"De Niro\");",
							"    pm.expect(jsonData.phone).to.eql(\"1234\");",
							"    pm.expect(jsonData.dob).to.eql(\"19850423\");",
							"    pm.expect(jsonData.gender).to.eql(\"male\");",
							"    pm.expect(jsonData.school).to.eql(\"Lol What State University\");",
							"    pm.expect(jsonData.employer).to.eql(\"Uncle Sam\");",
							"    pm.expect(jsonData.balance).to.eql(10);",
							"    pm.expect(jsonData.username).to.eql(\"superman\");",
							"    pm.expect(jsonData.eos).to.eql(\"123321\");",
							"});",
							"",
							"// TODO: more accurate schema validation of email, DOB, phone etc.",
							"",
							"var schema = {",
							"    \"type\" : \"object\",",
							"    \"properties\" : {",
							"              \"username\": {\"type\" : \"string\" } ,",
							"              \"eos\": {\"type\" : \"string\" } ,",
							"              \"email\": {\"type\" : \"string\" } ,",
							"              \"firstName\" : {\"type\" : \"string\" } ,",
							"              \"lastName\" : {\"type\" : \"string\" } ,",
							"              \"phone\" : {\"type\" : \"string\" } ,",
							"              \"dob\" : {\"type\" : \"string\" } ,",
							"              \"gender\" : {\"type\" : \"string\" } ,",
							"              \"school\" : {\"type\" : \"string\" } ,",
							"              \"employer\" : {\"type\" : \"string\" } ",
							"        },",
							"   // \"required\": [ \"email\", \"firstName\", \"lastName\", \"phone\", \"dob\", \"gender\",\"school\",\"employer\"]",
							"};",
							"",
							"pm.test('Schema is valid', function() {",
							"  var jsonData = pm.response.json();",
							"  pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
							"});",
							"",
							"console.log(tv4.error);  ",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "62bef184-6be7-4c86-ae7e-8c469b6a4e57",
						"type": "text/javascript",
						"exec": [
							"// TODO: set JWT in environment after log in, so can be used in the test automatically ",
							"",
							"// pm.environment.set(\"admin_email\", \"admin@lumeos.io\");",
							"// pm.environment.set(\"admin_pw\", \"test\");",
							"",
							"// pm.sendRequest({",
							"//     url: 'localhost:8081/v1/login',",
							"//     method: 'POST',",
							"//     header: {",
							"//         'content-type': 'application/json',",
							"//     },",
							"//     body: {",
							"//         mode: 'raw',",
							"//         raw: JSON.stringify({ email: pm.environment.get(\"admin_email\"), password: pm.environment.get(\"admin_pw\") })",
							"//     }",
							"// }, function (err, res) {",
							"//     pm.environment.set(\"authorization\", \"Bearer \" + res.json().token);",
							"// });",
							"",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\r\n  \"email\" : \"admin@lumeos.io\",\r\n  \"password\" : \"test\"\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/users/2",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"users",
						"2"
					]
				}
			},
			"response": []
		},
		{
			"name": "Check admin exists",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d530478b-d6a4-4193-a242-a36cc5de58b9",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is ok\"] = responseCode.code === 200",
							"",
							"",
							"pm.test(\"check fields not null\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.email).to.equal(\"admin@lumeos.io\");",
							"    pm.expect(jsonData.balance).to.equal(10);",
							"});",
							"",
							"",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "a415ab9f-4350-4e97-80ab-47dbb805391f",
						"type": "text/javascript",
						"exec": [
							"// pm.environment.set(\"admin_email\", \"admin@lumeos.io\");",
							"// pm.environment.set(\"admin_pw\", \"test\");",
							"",
							"// pm.sendRequest({",
							"//     url: 'localhost:8081/v1/login',",
							"//     method: 'POST',",
							"//     header: {",
							"//         'content-type': 'application/json',",
							"//     },",
							"//     body: {",
							"//         mode: 'raw',",
							"//         raw: JSON.stringify({ email: pm.environment.get(\"admin_email\"), password: pm.environment.get(\"admin_pw\") })",
							"//     }",
							"// }, function (err, res) {",
							"//     pm.environment.set(\"authorization\", \"Bearer \" + res.json().token);",
							"// });"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\r\n  \"email\" : \"admin@lumeos.io\",\r\n  \"password\" : \"test\"\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/users/1",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"users",
						"1"
					]
				}
			},
			"response": []
		},
		{
			"name": "Poll not found",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "ae1bbfe7-e7c6-4543-b5a0-6460e4cb464e",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is Not Found (404)\"] = responseCode.code === 404",
							"",
							"",
							"var jsonData = pm.response.json();",
							"",
							"pm.test(\"validate poll id\", function () {",
							"    pm.expect(jsonData.error).to.eql(\"Not Found\");",
							"    pm.expect(jsonData.message).to.eql(\"Poll not found\");",
							"})",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "83bdf683-b340-43a4-a6e8-43cd034cd4c1",
						"type": "text/javascript",
						"exec": [
							"// pm.environment.set(\"admin_email\", \"admin@lumeos.io\");",
							"// pm.environment.set(\"admin_pw\", \"test\");",
							"",
							"// pm.sendRequest({",
							"//     url: 'localhost:8081/v1/login',",
							"//     method: 'POST',",
							"//     header: {",
							"//         'content-type': 'application/json',",
							"//     },",
							"//     body: {",
							"//         mode: 'raw',",
							"//         raw: JSON.stringify({ email: pm.environment.get(\"admin_email\"), password: pm.environment.get(\"admin_pw\") })",
							"//     }",
							"// }, function (err, res) {",
							"//     pm.environment.set(\"authorization\", \"Bearer \" + res.json().token);",
							"// });",
							"",
							"",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\r\n  \"email\" : \"admin@lumeos.io\",\r\n  \"password\" : \"test\"\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/polls/0",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"polls",
						"0"
					]
				},
				"description": "Poll with id 0 doesn't exist"
			},
			"response": []
		},
		{
			"name": "User not found",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "ecab9812-67eb-409e-b451-80fad820066c",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is Not Found (404)\"] = responseCode.code === 404",
							"",
							"",
							"var jsonData = pm.response.json();",
							"",
							"pm.test(\"validate user id\", function () {",
							"    pm.expect(jsonData.error).to.eql(\"Not Found\");",
							"    pm.expect(jsonData.message).to.eql(\"User not found\");",
							"})",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "83bdf683-b340-43a4-a6e8-43cd034cd4c1",
						"type": "text/javascript",
						"exec": [
							"// pm.environment.set(\"admin_email\", \"admin@lumeos.io\");",
							"// pm.environment.set(\"admin_pw\", \"test\");",
							"",
							"// pm.sendRequest({",
							"//     url: 'localhost:8081/v1/login',",
							"//     method: 'POST',",
							"//     header: {",
							"//         'content-type': 'application/json',",
							"//     },",
							"//     body: {",
							"//         mode: 'raw',",
							"//         raw: JSON.stringify({ email: pm.environment.get(\"admin_email\"), password: pm.environment.get(\"admin_pw\") })",
							"//     }",
							"// }, function (err, res) {",
							"//     pm.environment.set(\"authorization\", \"Bearer \" + res.json().token);",
							"// });",
							"",
							"",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\r\n  \"email\" : \"admin@lumeos.io\",\r\n  \"password\" : \"test\"\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/users/0",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"users",
						"0"
					]
				},
				"description": "User Id 0 doesn't exist"
			},
			"response": []
		},
		{
			"name": "Create poll 1",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "f2432186-6c7c-44ca-9246-a1fdf8f97ede",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is OK (200)\"] = responseCode.code === 200",
							"",
							"pm.test(\"poll_id returned on creation\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.poll_id).to.equal(1)",
							"});",
							"",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "6d397378-0dca-4696-b2a7-50d10e206e43",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\t\"question\" : \"Who runs the world\",\r\n\t\"answers\" : [\"Girls\", \"Squirrels\"],\r\n\t\"tags\" : [\"lol\", \"what\"],\r\n\t\"creator_id\" : 2\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/polls",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"polls"
					]
				},
				"description": "Create first poll and check poll_id = 1"
			},
			"response": []
		},
		{
			"name": "Create poll 2",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "789d99b6-db99-41a6-b8b9-35d313718c26",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is OK (200)\"] = responseCode.code === 200",
							"",
							"pm.test(\"poll_id returned on creation\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.poll_id).to.equal(2)",
							"});",
							"",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "6d397378-0dca-4696-b2a7-50d10e206e43",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\t\"question\" : \"What is the meaning of life?\",\r\n\t\"answers\" : [\"Power\", \"Sex\"],\r\n\t\"tags\" : [\"Daniel\", \"Carnegie\"],\r\n\t\"creator_id\" : 1\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/polls",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"polls"
					]
				},
				"description": "Create second poll and check poll_id returned = 2"
			},
			"response": []
		},
		{
			"name": "List All Polls",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "24bab4c9-3275-4978-8c27-c756d2bd28c6",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is Ok (200)\"] = responseCode.code === 200",
							"",
							"",
							"var jsonData = pm.response.json();",
							"",
							"pm.test(\"Test length of the response.\", function() {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData.length).to.equal(2);",
							"});",
							"",
							"pm.test(\"Test field values.\", function () {",
							"    const jsonData = pm.response.json();",
							"    let index = 0;",
							"    pm.expect(jsonData[index].answers[0]).to.equal(\"Girls\");",
							"    pm.expect(jsonData[index].answers[1]).to.equal(\"Squirrels\");",
							"    pm.expect(jsonData[index].tags[0]).to.equal(\"lol\");",
							"    pm.expect(jsonData[index].tags[1]).to.equal(\"what\");",
							"    pm.expect(jsonData[index].poll_id).to.equal(1);",
							"    pm.expect(jsonData[index].question).to.equal(\"Who runs the world\");",
							"    pm.expect(jsonData[index].participant_count).to.equal(0);",
							"    pm.expect(jsonData[index].price).to.equal(0);",
							"    pm.expect(jsonData[index].creator_id).to.equal(2);",
							"    pm.expect(jsonData[index].creator_image).to.equal(\"/v1/profile_images/2\");",
							"    ",
							"    index = 1;",
							"    pm.expect(jsonData[index].answers[0]).to.equal(\"Power\");",
							"    pm.expect(jsonData[index].answers[1]).to.equal(\"Sex\");",
							"    pm.expect(jsonData[index].tags[0]).to.equal(\"Daniel\");",
							"    pm.expect(jsonData[index].tags[1]).to.equal(\"Carnegie\");",
							"    pm.expect(jsonData[index].poll_id).to.equal(2);",
							"    pm.expect(jsonData[index].question).to.equal(\"What is the meaning of life?\");",
							"    pm.expect(jsonData[index].participant_count).to.equal(0);",
							"    pm.expect(jsonData[index].price).to.equal(0);",
							"    pm.expect(jsonData[index].creator_id).to.equal(1);",
							"    pm.expect(jsonData[index].creator_image).to.equal(\"/v1/profile_images/1\");",
							"    ",
							"    ",
							"});",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "83bdf683-b340-43a4-a6e8-43cd034cd4c1",
						"type": "text/javascript",
						"exec": [
							"// pm.environment.set(\"admin_email\", \"admin@lumeos.io\");",
							"// pm.environment.set(\"admin_pw\", \"test\");",
							"",
							"// pm.sendRequest({",
							"//     url: 'localhost:8081/v1/login',",
							"//     method: 'POST',",
							"//     header: {",
							"//         'content-type': 'application/json',",
							"//     },",
							"//     body: {",
							"//         mode: 'raw',",
							"//         raw: JSON.stringify({ email: pm.environment.get(\"admin_email\"), password: pm.environment.get(\"admin_pw\") })",
							"//     }",
							"// }, function (err, res) {",
							"//     pm.environment.set(\"authorization\", \"Bearer \" + res.json().token);",
							"// });",
							"",
							"",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\r\n  \"email\" : \"admin@lumeos.io\",\r\n  \"password\" : \"test\"\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/polls/",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"polls",
						""
					]
				},
				"description": "List polls created"
			},
			"response": []
		},
		{
			"name": "List polls queryCreator",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "1ec718e1-1056-4ab4-a5b4-3d2291eaa30c",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is Ok (200)\"] = responseCode.code === 200",
							"",
							"",
							"var jsonData = pm.response.json();",
							"",
							"pm.test(\"Test length of the response.\", function() {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData.length).to.equal(1);",
							"});",
							"",
							"pm.test(\"Test field values.\", function () {",
							"    var jsonData = pm.response.json();",
							"    const index = 0;",
							"    pm.expect(jsonData[index].answers[0]).to.equal(\"Girls\");",
							"    pm.expect(jsonData[index].answers[1]).to.equal(\"Squirrels\");",
							"    pm.expect(jsonData[index].tags[0]).to.equal(\"lol\");",
							"    pm.expect(jsonData[index].tags[1]).to.equal(\"what\");",
							"    pm.expect(jsonData[index].poll_id).to.equal(1);",
							"    pm.expect(jsonData[index].question).to.equal(\"Who runs the world\");",
							"    pm.expect(jsonData[index].participant_count).to.equal(0);",
							"    pm.expect(jsonData[index].price).to.equal(0);",
							"    pm.expect(jsonData[index].creator_id).to.equal(2);",
							"    pm.expect(jsonData[index].creator_image).to.equal(\"/v1/profile_images/2\");",
							"});",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "83bdf683-b340-43a4-a6e8-43cd034cd4c1",
						"type": "text/javascript",
						"exec": [
							"// pm.environment.set(\"admin_email\", \"admin@lumeos.io\");",
							"// pm.environment.set(\"admin_pw\", \"test\");",
							"",
							"// pm.sendRequest({",
							"//     url: 'localhost:8081/v1/login',",
							"//     method: 'POST',",
							"//     header: {",
							"//         'content-type': 'application/json',",
							"//     },",
							"//     body: {",
							"//         mode: 'raw',",
							"//         raw: JSON.stringify({ email: pm.environment.get(\"admin_email\"), password: pm.environment.get(\"admin_pw\") })",
							"//     }",
							"// }, function (err, res) {",
							"//     pm.environment.set(\"authorization\", \"Bearer \" + res.json().token);",
							"// });",
							"",
							"",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\r\n  \"email\" : \"admin@lumeos.io\",\r\n  \"password\" : \"test\"\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/polls/?queryCreator=2",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"polls",
						""
					],
					"query": [
						{
							"key": "queryCreator",
							"value": "2"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Answer poll",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "599e461c-03b0-4cf5-a344-c4f92fbaf814",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is OK (204)\"] = responseCode.code === 204",
							"",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "6d397378-0dca-4696-b2a7-50d10e206e43",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\t\"user_id\" : 2,\r\n\t\"answer\" : 0\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/polls/1",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"polls",
						"1"
					]
				}
			},
			"response": []
		},
		{
			"name": "List All Polls, one answered",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "0108a143-d643-4332-83ed-6ae4f18db600",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is Ok (200)\"] = responseCode.code === 200",
							"",
							"",
							"const jsonData = pm.response.json();",
							"",
							"pm.test(\"Test length of the response.\", function() {",
							"    pm.expect(jsonData.length).to.equal(2);",
							"});",
							"",
							"pm.test(\"Check price and participant count, of answred poll\", function() {",
							"    const index = 0;",
							"    pm.expect(jsonData[index].participant_count).to.equal(1);",
							"    pm.expect(jsonData[index].price).to.equal(0.01);",
							"});",
							"",
							"pm.test(\"Test field values.\", function () {",
							"    let index = 0;",
							"    pm.expect(jsonData[index].answers[0]).to.equal(\"Girls\");",
							"    pm.expect(jsonData[index].answers[1]).to.equal(\"Squirrels\");",
							"    pm.expect(jsonData[index].tags[0]).to.equal(\"lol\");",
							"    pm.expect(jsonData[index].tags[1]).to.equal(\"what\");",
							"    pm.expect(jsonData[index].poll_id).to.equal(1);",
							"    pm.expect(jsonData[index].question).to.equal(\"Who runs the world\");",
							"    pm.expect(jsonData[index].participant_count).to.equal(1);",
							"    pm.expect(jsonData[index].price).to.equal(0.01);",
							"    pm.expect(jsonData[index].creator_id).to.equal(2);",
							"    pm.expect(jsonData[index].creator_image).to.equal(\"/v1/profile_images/2\");",
							"    ",
							"    index = 1;",
							"    pm.expect(jsonData[index].answers[0]).to.equal(\"Power\");",
							"    pm.expect(jsonData[index].answers[1]).to.equal(\"Sex\");",
							"    pm.expect(jsonData[index].tags[0]).to.equal(\"Daniel\");",
							"    pm.expect(jsonData[index].tags[1]).to.equal(\"Carnegie\");",
							"    pm.expect(jsonData[index].poll_id).to.equal(2);",
							"    pm.expect(jsonData[index].question).to.equal(\"What is the meaning of life?\");",
							"    pm.expect(jsonData[index].participant_count).to.equal(0);",
							"    pm.expect(jsonData[index].price).to.equal(0);",
							"    pm.expect(jsonData[index].creator_id).to.equal(1);",
							"    pm.expect(jsonData[index].creator_image).to.equal(\"/v1/profile_images/1\");",
							"    ",
							"    ",
							"});",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "83bdf683-b340-43a4-a6e8-43cd034cd4c1",
						"type": "text/javascript",
						"exec": [
							"// pm.environment.set(\"admin_email\", \"admin@lumeos.io\");",
							"// pm.environment.set(\"admin_pw\", \"test\");",
							"",
							"// pm.sendRequest({",
							"//     url: 'localhost:8081/v1/login',",
							"//     method: 'POST',",
							"//     header: {",
							"//         'content-type': 'application/json',",
							"//     },",
							"//     body: {",
							"//         mode: 'raw',",
							"//         raw: JSON.stringify({ email: pm.environment.get(\"admin_email\"), password: pm.environment.get(\"admin_pw\") })",
							"//     }",
							"// }, function (err, res) {",
							"//     pm.environment.set(\"authorization\", \"Bearer \" + res.json().token);",
							"// });",
							"",
							"",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\r\n  \"email\" : \"admin@lumeos.io\",\r\n  \"password\" : \"test\"\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/polls/",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"polls",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Query specific poll",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "ad00758a-1433-42b8-aba0-2214becd67b0",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is Ok (200)\"] = responseCode.code === 200",
							"",
							"",
							"const jsonData = pm.response.json();",
							"",
							"pm.test(\"Test field values with answered\", function () {",
							"    pm.expect(jsonData.answers[0]).to.equal(\"Girls\");",
							"    pm.expect(jsonData.answers[1]).to.equal(\"Squirrels\");",
							"    pm.expect(jsonData.tags[0]).to.equal(\"lol\");",
							"    pm.expect(jsonData.tags[1]).to.equal(\"what\");",
							"    pm.expect(jsonData.poll_id).to.equal(1);",
							"    pm.expect(jsonData.question).to.equal(\"Who runs the world\");",
							"    pm.expect(jsonData.participant_count).to.equal(1);",
							"    pm.expect(jsonData.price).to.equal(0.01);",
							"    pm.expect(jsonData.creator_id).to.equal(2);",
							"    pm.expect(jsonData.creator_image).to.equal(\"/v1/profile_images/2\");",
							"});",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "83bdf683-b340-43a4-a6e8-43cd034cd4c1",
						"type": "text/javascript",
						"exec": [
							"// pm.environment.set(\"admin_email\", \"admin@lumeos.io\");",
							"// pm.environment.set(\"admin_pw\", \"test\");",
							"",
							"// pm.sendRequest({",
							"//     url: 'localhost:8081/v1/login',",
							"//     method: 'POST',",
							"//     header: {",
							"//         'content-type': 'application/json',",
							"//     },",
							"//     body: {",
							"//         mode: 'raw',",
							"//         raw: JSON.stringify({ email: pm.environment.get(\"admin_email\"), password: pm.environment.get(\"admin_pw\") })",
							"//     }",
							"// }, function (err, res) {",
							"//     pm.environment.set(\"authorization\", \"Bearer \" + res.json().token);",
							"// });",
							"",
							"",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\r\n  \"email\" : \"admin@lumeos.io\",\r\n  \"password\" : \"test\"\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/polls/1",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"polls",
						"1"
					]
				}
			},
			"response": []
		},
		{
			"name": "Query specific poll with isAnswered ",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "7bd9e4d1-0da4-49de-9475-a6591e7c1766",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is Ok (200)\"] = responseCode.code === 200",
							"",
							"",
							"const jsonData = pm.response.json();",
							"",
							"pm.test(\"Test field values with answered\", function () {",
							"    pm.expect(jsonData.answers[0]).to.equal(\"Girls\");",
							"    pm.expect(jsonData.answers[1]).to.equal(\"Squirrels\");",
							"    pm.expect(jsonData.tags[0]).to.equal(\"lol\");",
							"    pm.expect(jsonData.tags[1]).to.equal(\"what\");",
							"    pm.expect(jsonData.poll_id).to.equal(1);",
							"    pm.expect(jsonData.question).to.equal(\"Who runs the world\");",
							"    pm.expect(jsonData.participant_count).to.equal(1);",
							"    pm.expect(jsonData.price).to.equal(0.01);",
							"    pm.expect(jsonData.creator_id).to.equal(2);",
							"    pm.expect(jsonData.creator_image).to.equal(\"/v1/profile_images/2\");",
							"     pm.expect(jsonData.is_answered).to.equal(1);",
							"});",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "83bdf683-b340-43a4-a6e8-43cd034cd4c1",
						"type": "text/javascript",
						"exec": [
							"// pm.environment.set(\"admin_email\", \"admin@lumeos.io\");",
							"// pm.environment.set(\"admin_pw\", \"test\");",
							"",
							"// pm.sendRequest({",
							"//     url: 'localhost:8081/v1/login',",
							"//     method: 'POST',",
							"//     header: {",
							"//         'content-type': 'application/json',",
							"//     },",
							"//     body: {",
							"//         mode: 'raw',",
							"//         raw: JSON.stringify({ email: pm.environment.get(\"admin_email\"), password: pm.environment.get(\"admin_pw\") })",
							"//     }",
							"// }, function (err, res) {",
							"//     pm.environment.set(\"authorization\", \"Bearer \" + res.json().token);",
							"// });",
							"",
							"",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\r\n  \"email\" : \"admin@lumeos.io\",\r\n  \"password\" : \"test\"\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/polls/1?isAnswered=2",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"polls",
						"1"
					],
					"query": [
						{
							"key": "isAnswered",
							"value": "2"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Query specific poll with isAnswered, for unrelated user",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "be6a90f6-7135-40f0-8343-92ea155d9642",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is Ok (200)\"] = responseCode.code === 200",
							"",
							"",
							"const jsonData = pm.response.json();",
							"",
							"pm.test(\"Test field values with answered\", function () {",
							"    pm.expect(jsonData.answers[0]).to.equal(\"Girls\");",
							"    pm.expect(jsonData.answers[1]).to.equal(\"Squirrels\");",
							"    pm.expect(jsonData.tags[0]).to.equal(\"lol\");",
							"    pm.expect(jsonData.tags[1]).to.equal(\"what\");",
							"    pm.expect(jsonData.poll_id).to.equal(1);",
							"    pm.expect(jsonData.question).to.equal(\"Who runs the world\");",
							"    pm.expect(jsonData.participant_count).to.equal(1);",
							"    pm.expect(jsonData.price).to.equal(0.01);",
							"    pm.expect(jsonData.creator_id).to.equal(2);",
							"    pm.expect(jsonData.creator_image).to.equal(\"/v1/profile_images/2\");",
							"     pm.expect(jsonData.is_answered).to.equal(0);",
							"});",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "83bdf683-b340-43a4-a6e8-43cd034cd4c1",
						"type": "text/javascript",
						"exec": [
							"// pm.environment.set(\"admin_email\", \"admin@lumeos.io\");",
							"// pm.environment.set(\"admin_pw\", \"test\");",
							"",
							"// pm.sendRequest({",
							"//     url: 'localhost:8081/v1/login',",
							"//     method: 'POST',",
							"//     header: {",
							"//         'content-type': 'application/json',",
							"//     },",
							"//     body: {",
							"//         mode: 'raw',",
							"//         raw: JSON.stringify({ email: pm.environment.get(\"admin_email\"), password: pm.environment.get(\"admin_pw\") })",
							"//     }",
							"// }, function (err, res) {",
							"//     pm.environment.set(\"authorization\", \"Bearer \" + res.json().token);",
							"// });",
							"",
							"",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\r\n  \"email\" : \"admin@lumeos.io\",\r\n  \"password\" : \"test\"\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/polls/1?isAnswered=1",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"polls",
						"1"
					],
					"query": [
						{
							"key": "isAnswered",
							"value": "1"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Buy Poll/Get result",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "f1cd32d2-ee8a-4219-8add-408f06cbbb5b",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is OK (200)\"] = responseCode.code === 200",
							"",
							"const jsonData = pm.response.json();",
							"",
							"pm.test(\"Test fields returned\", function () {",
							"    pm.expect(jsonData.poll_id).to.equal(1);",
							"    pm.expect(jsonData.question).to.equal(\"Who runs the world\");",
							"    const index = 0;",
							"    pm.expect(jsonData.answers[\"Girls\"]).to.equal(1);",
							"    pm.expect(jsonData.answers[\"Squirrels\"]).to.equal(0);",
							"});",
							"",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "6d397378-0dca-4696-b2a7-50d10e206e43",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\t\"user_id\" : 1\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/polls/1/results",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"polls",
						"1",
						"results"
					]
				}
			},
			"response": []
		},
		{
			"name": "Check buyers balance",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "f11684e4-0fc9-447d-96eb-9ce105f6cc07",
						"type": "text/javascript",
						"exec": [
							"tests[\"Status is ok\"] = responseCode.code === 200",
							"",
							"const jsonData = pm.response.json();",
							"pm.test(\"check fields\", function () {",
							"    pm.expect(jsonData.email).to.equal(\"admin@lumeos.io\");",
							"    pm.expect(jsonData.balance).to.equal(9.99);",
							"});",
							"",
							"",
							""
						]
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "a415ab9f-4350-4e97-80ab-47dbb805391f",
						"type": "text/javascript",
						"exec": [
							"// pm.environment.set(\"admin_email\", \"admin@lumeos.io\");",
							"// pm.environment.set(\"admin_pw\", \"test\");",
							"",
							"// pm.sendRequest({",
							"//     url: 'localhost:8081/v1/login',",
							"//     method: 'POST',",
							"//     header: {",
							"//         'content-type': 'application/json',",
							"//     },",
							"//     body: {",
							"//         mode: 'raw',",
							"//         raw: JSON.stringify({ email: pm.environment.get(\"admin_email\"), password: pm.environment.get(\"admin_pw\") })",
							"//     }",
							"// }, function (err, res) {",
							"//     pm.environment.set(\"authorization\", \"Bearer \" + res.json().token);",
							"// });"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJpYXQiOjE1MzExMDgyNzd9.Cueh9jtZLBA5MPz7xcLMr1cV9dNLTEas8Xx1Nxa6IIg",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\r\n  \"email\" : \"admin@lumeos.io\",\r\n  \"password\" : \"test\"\r\n}"
				},
				"url": {
					"raw": "localhost:8081/v1/users/1",
					"host": [
						"localhost"
					],
					"port": "8081",
					"path": [
						"v1",
						"users",
						"1"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "6d7a84a1-026a-4804-90a2-62fb6deeb53c",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "42913e52-0492-44d5-8898-9574122c4006",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}